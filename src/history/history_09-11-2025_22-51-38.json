[{"parts":[{"content":"You are an expert biocurator for HPO/MONDO/OMIM. Default to fast, conversational Q&A; switch to curation only when explicitly asked. If unclear, ask one short clarifying question.\n\nOutput Contract\n- Always return an object with fields:\n  - text: free-form answer\n  - annotations: list (possibly empty). Leave empty for Q&A.\n\nQ&A Strategy (fast path - choose the right source)\n- Do NOT call tools in Q&A unless the user provided or explicitly asked about an ontology/database term: HP:nnnnnnn, MONDO:nnnnnnn, OMIM:nnnnnnn, ORPHA:nnnnnnn, DECIPHER IDs, or PMID:nnnnnnn.\n- Intent detection:\n  - Disease->phenotypes (e.g., list phenotypes for OMIM/MONDO/label/PMID; does disease X have phenotype Y?; organ-system phenotypes in a disease):\n    - Use HPOA only via filter_hpoa / filter_hpoa_by_pmid / filter_hpoa_by_hp\n    - Summarize up to 10 phenotypes, returning both the ID and label from search_hp, e.g. \"HP:0000083 (Renal insufficiency)\" (return all if <10)\n  - Phenotype concept (e.g., what is HP:0001250? map a phenotype label to HP:ID; compare phenotypes):\n    - Use ontology tools only: search_hp / search_mondo; do NOT call HPOA\n  - Category within a disease:\n    - Make one baseline HPOA call (filter_hpoa), then call categorize_hpo(HP:ID) to keep matches; summarize up to 10 (ID and label)\n  - Terse inputs:\n    - Disease-like (OMIM/MONDO/ORPHA/DECIPHER or a disease label): list phenotypes via HPOA\n    - Phenotype-like (HP:nnnnnnn or a phenotype label): use search_hp only; do NOT call HPOA unless asked for phenotype->diseases\n  - Not found: if baseline returns zero rows say: \"Sorry, the given ID/label is not found in the HPOA file. Please try alternate spelling or verify the disease ID.\" Do not fabricate results or call literature tools in Q&A.\n\nIn all Q&A cases\n- Be brief and direct. Leave annotations empty.\n- Do NOT call literature (PubMed) or OMIM tools.\n- Do NOT call any tools for general/off-topic questions - answer briefly or decline.\n\nAbsolutely No Hallucinations\n- Source of truth: HPOA rows are authoritative for phenotypes, evidence codes, references (PMIDs/OMIM), frequency, onset, sex, qualifiers. If a field is missing, say \"not specified in HPOA\".\n- IDs/labels must come from tools:\n  - Phenotypes: use hpo_id values from HPOA rows. If showing a label for an HP:ID, verify via search_hp(HP:nnnnnnn).\n  - Diseases: use database_id/disease_name from HPOA rows. To resolve/verify IDs/labels, use search_mondo (MONDO) or get_omim_terms (OMIM).\n  - Normalize identifiers to HP:nnnnnnn / MONDO:nnnnnnn when shown.\n  - If a lookup returns nothing, state you cannot verify. Never invent IDs, labels, or references.\n- No external inference: do not infer clinical specifics beyond HPOA. General disease context is fine; phenotype specifics must be anchored to HPOA rows.\n\nCuration (slow path - only when explicitly asked)\n- Use search_mondo / get_omim_terms / search_hp / pubmed_search_pmids / lookup_pmid sparingly to justify changes. Don't lookup the same PMID multiple times.\n- Include reasoning in text and populate annotations with proposed rows (status: new/updated/removed).\n- If a user asks for removal or modification of an annotation, only use evidence from the literature to support these curations.\n- Include a small copyable JSON block with {\"explanation\",\"annotations\"}. It is fine to propose no changes if evidence is insufficient.\n- Annotation field guidelines: frequency must be a fraction, percentage, or HPO frequency term; if the text lists different frequencies by sex, duplicate the rows and list the frequency separately for each sex; if a frequency is a range, input the average of the bounds; onset must be an HPO onset term; sex must be MALE, FEMALE, or empty; qualifier is either NOT or empty.\n\nTools (only when explicitly relevant)\n- filter_hpoa: load HPOA rows (database_id normalized equality; disease_name case-insensitive LIKE)\n- filter_hpoa_by_pmid: rows citing a PMID (PMID:nnnnnnn or digits)\n- filter_hpoa_by_hp: rows for a phenotype (HP:ID or label; labels resolved via search_hp)\n- categorize_hpo: categorize HPO terms under top-level organ systems (HP:0000118)\n- categorize_mondo: categorize MONDO terms into high-level disease groupings (use only when asked about MONDO categories)\n- search_hp: resolve HPO IDs/labels; verify labels for HP:IDs; find onset/frequency terms when explicitly stated\n- search_mondo, get_omim_terms: resolve MONDO/OMIM disease identifiers and labels\n- get_omim_clinical (curation only): clinical features/inheritance from OMIM\n- pubmed_search_pmids, lookup_pmid (curation only): literature lookup\n\nWorkflow\n1) Q&A:\n   - Disease->phenotypes: one HPOA call (filter_hpoa / filter_hpoa_by_pmid / filter_hpoa_by_hp); optionally categorize_hpo\n   - Phenotype concept: use only ontology tools (search_hp/search_mondo)\n   - No tools for general/off-topic questions\n   - Summarize up to 10 (returning both ID and label); leave annotations empty; DO NOT call literature/OMIM tools\n   - If a user asks a question, try to answer it. DO NOT say you are \"going to\" do something and terminate.\n2) Curation (on request): use search_mondo/get_omim_terms/search_hp/pubmed_search_pmids/lookup_pmid sparingly; return 10 or fewer annotations + short explanation.\n3) Be conservative and transparent; acceptable to propose no changes\n4) Include onset/frequency/sex only when supported by HPOA or explicit evidence in curation","timestamp":"2025-09-12T02:51:46.479666Z","dynamic_ref":null,"part_kind":"system-prompt"},{"content":"Which organ system does HP:0004322 (Short stature) belong to?","timestamp":"2025-09-12T02:51:46.479666Z","part_kind":"user-prompt"}],"instructions":null,"kind":"request"},{"parts":[{"tool_name":"search_hp","args":"{\"term\": \"HP:0004322\"}","tool_call_id":"call_dKOzdvRYdgDqjXY64KTlxhRw","part_kind":"tool-call"},{"tool_name":"categorize_hpo","args":"{\"term\": \"HP:0004322\"}","tool_call_id":"call_b4XVEQ8LUQxJ5AVylqQRa1cc","part_kind":"tool-call"}],"usage":{"input_tokens":3184,"cache_write_tokens":0,"cache_read_tokens":0,"output_tokens":384,"input_audio_tokens":0,"cache_audio_read_tokens":0,"output_audio_tokens":0,"details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":320,"rejected_prediction_tokens":0}},"model_name":"gpt-5-mini-2025-08-07","timestamp":"2025-09-12T02:51:46Z","kind":"response","provider_name":"openai","provider_details":null,"provider_response_id":"chatcmpl-CEoB0R6lq5JWPmgQe4ZMcHm4Dj0Qc"},{"parts":[{"tool_name":"search_hp","content":[{"id":"HP:0004322","label":"Short stature","definition":"A height below that which is expected according to age and gender norms. Although there is no universally accepted definition of short stature, many refer to \"short stature\" as height more than 2 standard deviations below the mean for age and gender (or below the 3rd percentile for age and gender dependent norms)."}],"tool_call_id":"call_dKOzdvRYdgDqjXY64KTlxhRw","metadata":null,"timestamp":"2025-09-12T02:51:55.657339Z","part_kind":"tool-return"},{"tool_name":"categorize_hpo","content":["HP:0001507 (Growth abnormality)"],"tool_call_id":"call_b4XVEQ8LUQxJ5AVylqQRa1cc","metadata":null,"timestamp":"2025-09-12T02:51:56.889185Z","part_kind":"tool-return"}],"instructions":null,"kind":"request"},{"parts":[{"tool_name":"final_result","args":"{\"text\":\"HP:0004322 (Short stature) is classified under the HPO category \\\"Growth abnormality\\\" â€” HP:0001507.\",\"annotations\":[]}","tool_call_id":"call_MHA82O5UAwa8d4UtAirbrHkp","part_kind":"tool-call"}],"usage":{"input_tokens":3353,"cache_write_tokens":0,"cache_read_tokens":2944,"output_tokens":308,"input_audio_tokens":0,"cache_audio_read_tokens":0,"output_audio_tokens":0,"details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":256,"rejected_prediction_tokens":0}},"model_name":"gpt-5-mini-2025-08-07","timestamp":"2025-09-12T02:51:56Z","kind":"response","provider_name":"openai","provider_details":null,"provider_response_id":"chatcmpl-CEoBADdSoLhERDmt24ZHiOSYRu4E0"},{"parts":[{"tool_name":"final_result","content":"Final result processed.","tool_call_id":"call_MHA82O5UAwa8d4UtAirbrHkp","metadata":null,"timestamp":"2025-09-12T02:52:02.094102Z","part_kind":"tool-return"}],"instructions":null,"kind":"request"}]